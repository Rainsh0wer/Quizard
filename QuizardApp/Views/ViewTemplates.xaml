<ResourceDictionary x:Class="QuizardApp.Views.ViewTemplates"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:vm="clr-namespace:QuizardApp.ViewModels"
                    xmlns:local="clr-namespace:QuizardApp.Views">

    <!-- Login View Template -->
    <DataTemplate x:Key="LoginViewTemplate" DataType="{x:Type vm:LoginViewModel}">
        <Grid Background="#FF2D3748">
            <Border Background="White" 
                    CornerRadius="8" 
                    MaxWidth="400" 
                    MaxHeight="500" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center"
                    Padding="40">
                <StackPanel>
                    <TextBlock Text="Welcome to Quizard" 
                               FontSize="24" 
                               FontWeight="Bold" 
                               HorizontalAlignment="Center" 
                               Margin="0,0,0,20"
                               Foreground="#FF2D3748"/>
                    
                    <TextBlock Text="Please sign in to continue" 
                               FontSize="14" 
                               HorizontalAlignment="Center" 
                               Margin="0,0,0,30"
                               Foreground="#FF718096"/>

                    <Label Content="Username:" FontWeight="SemiBold"/>
                    <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                             Padding="12"
                             FontSize="14"
                             Margin="0,5,0,15"/>

                    <Label Content="Password:" FontWeight="SemiBold"/>
                    <PasswordBox x:Name="PasswordBox"
                                 PasswordChanged="PasswordBox_PasswordChanged"
                                 Padding="12"
                                 FontSize="14"
                                 Margin="0,5,0,20"/>

                    <Button Content="Sign In"
                            Command="{Binding LoginCommand}"
                            IsDefault="True"
                            Background="#FF007ACC"
                            Foreground="White"
                            FontWeight="Bold"
                            Padding="0,12"
                            FontSize="14"
                            BorderThickness="0"
                            Margin="0,0,0,15"/>

                    <TextBlock Text="{Binding ErrorMessage}"
                               Foreground="Red"
                               FontWeight="SemiBold"
                               TextWrapping="Wrap"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,15"
                               Visibility="{Binding ErrorMessage, Converter={x:Static local:StringToVisibilityConverter.Instance}}"/>

                    <Separator Margin="0,15"/>

                    <TextBlock Text="Don't have an account?" 
                               HorizontalAlignment="Center"
                               Margin="0,10,0,5"/>
                    
                    <Button Content="Create Account"
                            Command="{Binding RegisterCommand}"
                            Background="Transparent"
                            Foreground="#FF007ACC"
                            FontWeight="SemiBold"
                            BorderThickness="1"
                            BorderBrush="#FF007ACC"
                            Padding="0,8"/>

                    <!-- Demo buttons for testing -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                        <Button Content="Demo Student" 
                                Click="DemoStudentButton_Click"
                                Background="#FF28A745" 
                                Foreground="White" 
                                Margin="0,0,10,0"
                                Padding="8,4"
                                FontSize="12"/>
                        <Button Content="Demo Teacher" 
                                Click="DemoTeacherButton_Click"
                                Background="#FF FFC107" 
                                Foreground="Black" 
                                Padding="8,4"
                                FontSize="12"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </DataTemplate>

    <!-- Student Dashboard Template -->
    <DataTemplate x:Key="StudentDashboardTemplate" DataType="{x:Type vm:StudentDashboardViewModel}">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Welcome Header -->
                <Border Grid.Row="0" Background="#FF007ACC" CornerRadius="8" Padding="20" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="{Binding WelcomeMessage}" 
                                   FontSize="24" 
                                   FontWeight="Bold" 
                                   Foreground="White"/>
                        <TextBlock Text="Ready to take some quizzes?" 
                                   FontSize="14" 
                                   Foreground="White" 
                                   Opacity="0.9"/>
                    </StackPanel>
                </Border>

                <!-- Quick Stats -->
                <Grid Grid.Row="1" Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0" Background="#FFF8F9FA" BorderBrush="#FFdee2e6" BorderThickness="1" CornerRadius="4" Padding="15" Margin="0,0,10,0">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="{Binding TotalQuizzesAvailable}" FontSize="32" FontWeight="Bold" Foreground="#FF007ACC" HorizontalAlignment="Center"/>
                            <TextBlock Text="Available Quizzes" FontSize="12" Foreground="#FF6C757D" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <Border Grid.Column="1" Background="#FFF8F9FA" BorderBrush="#FFdee2e6" BorderThickness="1" CornerRadius="4" Padding="15" Margin="0,0,10,0">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="{Binding CompletedQuizzes}" FontSize="32" FontWeight="Bold" Foreground="#FF28A745" HorizontalAlignment="Center"/>
                            <TextBlock Text="Completed" FontSize="12" Foreground="#FF6C757D" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <Border Grid.Column="2" Background="#FFF8F9FA" BorderBrush="#FFdee2e6" BorderThickness="1" CornerRadius="4" Padding="15" Margin="0,0,10,0">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="{Binding AverageScore, StringFormat=F1}" FontSize="32" FontWeight="Bold" Foreground="#FFFD7E14" HorizontalAlignment="Center"/>
                            <TextBlock Text="Average Score %" FontSize="12" Foreground="#FF6C757D" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <Border Grid.Column="3" Background="#FFF8F9FA" BorderBrush="#FFDE2e6" BorderThickness="1" CornerRadius="4" Padding="15">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="{Binding EnrolledClasses}" FontSize="32" FontWeight="Bold" Foreground="#FF6F42C1" HorizontalAlignment="Center"/>
                            <TextBlock Text="Classes Joined" FontSize="12" Foreground="#FF6C757D" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Main Content -->
                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Available Quizzes -->
                    <Border Grid.Column="0" Background="White" BorderBrush="#FFDE2e6" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,0,10,0">
                        <StackPanel>
                            <TextBlock Text="ðŸ“ Available Quizzes" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>
                            <ListView ItemsSource="{Binding AssignedQuizzes}" MaxHeight="300">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#FFF8F9FA" CornerRadius="4" Padding="12" Margin="0,2">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding Title}" FontWeight="SemiBold"/>
                                                    <TextBlock Text="{Binding Description}" FontSize="12" Foreground="#FF6C757D" TextTrimming="CharacterEllipsis"/>
                                                </StackPanel>
                                                
                                                <Button Grid.Column="1" 
                                                        Content="Take Quiz" 
                                                        Command="{Binding DataContext.TakeQuizCommand, RelativeSource={RelativeSource AncestorType=ListView}}"
                                                        CommandParameter="{Binding}"
                                                        Background="#FF007ACC" 
                                                        Foreground="White" 
                                                        Padding="12,6" 
                                                        BorderThickness="0"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </StackPanel>
                    </Border>

                    <!-- Quick Actions -->
                    <StackPanel Grid.Column="1">
                        <Border Background="White" BorderBrush="#FFDE2e6" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                            <StackPanel>
                                <TextBlock Text="ðŸš€ Quick Actions" FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>
                                
                                <Button Content="ðŸ” Search Subjects" 
                                        Command="{Binding SearchSubjectsCommand}"
                                        Background="#FF17A2B8" 
                                        Foreground="White" 
                                        Padding="12,8" 
                                        BorderThickness="0" 
                                        Margin="0,0,0,10"/>
                                
                                <Button Content="ðŸŽ“ Join Class" 
                                        Command="{Binding JoinClassCommand}"
                                        Background="#FF28A745" 
                                        Foreground="White" 
                                        Padding="12,8" 
                                        BorderThickness="0" 
                                        Margin="0,0,0,10"/>
                                
                                <Button Content="ðŸ“Š View My Results" 
                                        Command="{Binding ViewResultsCommand}"
                                        Background="#FFFD7E14" 
                                        Foreground="White" 
                                        Padding="12,8" 
                                        BorderThickness="0"/>
                            </StackPanel>
                        </Border>

                        <!-- Recent Results -->
                        <Border Background="White" BorderBrush="#FFDE2e6" BorderThickness="1" CornerRadius="8" Padding="20">
                            <StackPanel>
                                <TextBlock Text="ðŸ“ˆ Recent Results" FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>
                                <ListView ItemsSource="{Binding RecentResults}" MaxHeight="200">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#FFF8F9FA" CornerRadius="4" Padding="8" Margin="0,2">
                                                <StackPanel>
                                                    <TextBlock Text="{Binding Quiz.Title}" FontWeight="SemiBold" FontSize="12"/>
                                                    <TextBlock Text="{Binding Score, StringFormat=Score: {0:F1}%}" FontSize="11" Foreground="#FF007ACC"/>
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>
            </Grid>
        </ScrollViewer>
    </DataTemplate>

</ResourceDictionary>